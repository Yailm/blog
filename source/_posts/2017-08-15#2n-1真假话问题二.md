title: 2n+1真假话问题二
date: 2017-08-15 21:31:21
tags:
  - logic
---
接着上次话题，这次将会有更好解决方案

#### 尝试发现规律

反正问题到现在也就一句话：**如何快速找到任意一个A类人**，或者说，如何快速地缩小范围？

当成算法优化问题考虑，你应该从2这个数字去入手，二分法二叉树已经在这方面给过提示。那为什么不考虑3/4/5之类的呢？拿分类来讲，分3类需要询问2次，只排除了2/3。每次排除1/n也就n=2时最大，效率也最高

综上，有了思考的方向，来一起看看结果：

下面是两个未知类别相互之间的判断

![真假话问题](/blog/images/20170815-1.png)

可以发现，在图上红色框中两种情况，两个人之间的判断都是“对方是A类人”，而他们也都是同样类别的。这不是瞎掰的，因为如果一个A类人和B类人，A类人说真话，就不会有这样情况

> 结论：如果两个人相互判断对方是A类人，那他们为同一类别

#### 利用规律

那该怎样利用这一结论呢？简单来说，如果两个人是同样类别的，我们随意去掉其中一人，这将使需要确定或是还未被确定类别的大大减少

不对，应该在把后面这个加上才算是“大大减少”：

>两个人中任意一个给出“他是B”的结论，那对不起，两个人都扔掉

可以结合上图，或自己考虑下。只要说出“他是B”，那两个人的类别只有两种情况：两个B类人；一个A类一个B类人
都不要了呗，反正A类比B类人多，买卖亏不成

#### 最终方案

这样下来方法可能就很多了，这里我给出我的方案：

* 2N+1个人，取一个人e出来（两种情况：e是B类人，那A类人至少比B类人多2个；e是A类人，那A类大于等于B类的人数）
* 剩下的2N个人，两两一组共形成N组，相互给出对方的评价
* 对于相互都给出“对方是A”结论的组，每个组中都挑出一个人来，剩余的人都可以丢
PS. 这里提一下，现在剩余的人依然是A类人大于等于B类人，（两个A类人组必然能留下一个A类人，但两个B类人组却不一定，且A类人几乎比B类人多）
* 然后判断一下剩余人数的奇偶性

  - 奇数，e就可以丢了（我们无法定义他的身份），我们再拉一个人上台成为新的e，剩余人也刚好为偶数
  - 偶数，不作为

* 重复刚才的操作

可以直接看最后，如果最后没有人从小组中出来，那台上的e一定是A类人
或是最后只剩下一个人，那他只能是A类人

这个方法相比于前一个方法n^2，它只需要**nlogn**的询问次数，而且在概率上，出现较坏情况的可能性也降低了许多（毕竟两个B类的组也不是总能伪装成功），每过一个流程，范围都在迅速缩小

#### 写在最后

这个问题在网上讨论挺少的，给出的也多是第一种方案。其实这文章应该写得带数据图那样的，我没有深入了解题目内在固定关联（比如，题目中给出的每个人自我判断是不是多余的）期望以后能看到这题完整详尽的解答，最好能得出和我一样的结论
