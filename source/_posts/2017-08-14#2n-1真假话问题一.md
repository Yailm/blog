title: 2n+1真假话问题（一）
date: 2017-08-14 00:25:30
tags:
  - logic
---
最近什么都没得到挺郁闷的，不会是我没更新这里吧

这是上次同学找导师留的题目，那时抽空让我帮他看看

#### 题目是这样:

> 有2n+1个人，其中有部分人只说真话为A类人，有部分人可能说真话可能说假话为B类人。（这个定义了就不会说成绕口令）
> 已知A类人至少有n+1个而B类人至多有n个
> 你只能问这样的问题：询问a：“b是不是说真话的人？“。a，b可以是同一个人，即问一个人，他自己是不是只说真话的人
> 请设计一个算法，用尽量少的询问次数使你确认所有人是哪类人？

大部分人看到这个题目，都能在10分钟理清思路：

> 那就是找到一个A类人（说真话），让他确认其他剩余的人

怎么找到这样一个人呢？所有2n+1个人里面，A类人占了一半以上，这有点像表决，他们始终能主导结果

那就设立个台子，我们每次拎一个人上来，**剩余**的人来对他进行确认

结果只有三种情况：

1. 平票，结论是底下A B两类人都为n个，那台上的人为A类人（因为A类人至少有n+1个）
2. A比B多，那台上的人就是A类人
3. B比A多，台上是B类人

对于前两种情况，很好，我们找到了一个说真话的人，接下来只要让他发言问题就行了
但如果不幸第3种，就必须重新刚才的操作，直到发现一个A类人或所有B类人

#### 考虑下最坏的情况：

- 所有的B类人都隐藏自己，全部说真话
- 我们拎出来也恰好都是B类人（除了最后一个，下面提）
- 还有，n个B类人，n+1个A类人

虽然是最坏情况，但必须基于合理且不多余的询问：应该加上提前中断机制：如果有一半及以上的人给出对台上人的相同判断，结果就已然确定

同时不提倡B类人去说假话，不合群的判断会导致直接从团队中剔除，而他自己对询问次数的贡献仅仅为1（他干扰了前面的中断机制，使得其多询问一人）

再考虑一下最后关头，n+2个人，里面有个B类人（瑟瑟发抖），我们也应该拎出来个A类人，让他判断剩余的人，这样才是最坏的情况

#### 总结一下：

第一次，B类人被拎上去，台下总共2n个人，前n个都说台上人是B类的，那就直接扔了他（询问次数+n）
第二次，另一个B类人被拎上去，台下2n-1（询问次数+n）
...

询问总次数：
- (n为偶数）n+n+(n-1)+(n-1)+...+(n/2+2)+(n/2+2)+(n/2+1)+[(n/2+1)+n] = 0.75n2+1.5n
- (n为奇数）n+n+(n-1)+(n-1)+...+((n+3)/2)+((n+3)/2)+[((n+1)/2)+n] = 0.75n2+1.5n-0.25

这是普通的方法，下篇用优化过的方法
